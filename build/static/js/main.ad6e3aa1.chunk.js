(this.webpackJsonppicworld=this.webpackJsonppicworld||[]).push([[0],{13:function(t,e,n){"use strict";n.r(e);var a=n(7),r=n(8),i=n(12),s=n(11),o=n(1),c=n.n(o),l=n(9),h=n.n(l),u=n(10),p=n.n(u),d=n(2),m=(n(42),n(43),n(0)),b=function(t){Object(i.a)(n,t);var e=Object(s.a)(n);function n(){var t;Object(a.a)(this,n);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return(t=e.call.apply(e,[this].concat(i))).state={disableForm:!1,query:"",searchText:"Search"},t.handleSubmit=function(e){e.preventDefault(),t.props.transition("SEARCH")},t.handleChangeQuery=function(e){t.setState({query:e.target.value})},t}return Object(r.a)(n,[{key:"enterLoading",value:function(){var t=this;this.setState({disableForm:!0,searchText:"Searching..."});var e=encodeURIComponent(this.state.query);setTimeout((function(){p()("https://api.flickr.com/services/feeds/photos_public.gne?lang=en-us&format=json&tags=".concat(e),{jsonpCallback:"jsoncallback"}).then((function(t){return t.json()})).then((function(e){var n=e.items;return t.props.transition("SEARCH_SUCCESS",{items:n})})).catch((function(){return t.props.transition("SEARCH_FAILURE")}))}),1e3)}},{key:"exitLoading",value:function(){this.setState({disableForm:!1,searchText:"Search"})}},{key:"enterError",value:function(){this.setState({searchText:"Try search again"})}},{key:"render",value:function(){var t=this;return Object(m.jsxs)("div",{className:"ui-app","data-state":this.props.machineState,children:[Object(m.jsxs)("form",{className:"ui-form",onSubmit:this.handleSubmit,children:[Object(m.jsx)("input",{className:"ui-input",disabled:this.state.disableForm,placeholder:"Search ",type:"search",value:this.state.query,onChange:this.handleChangeQuery}),Object(m.jsxs)("div",{className:"ui-buttons",children:[Object(m.jsx)("button",{className:"ui-button",disabled:this.state.disableForm,children:this.state.searchText}),Object(m.jsx)(d.Action,{show:"enterLoading",children:Object(m.jsx)("button",{className:"ui-button",type:"button",onClick:function(){return t.props.transition("CANCEL_SEARCH")},children:"Cancel"})})]})]}),Object(m.jsxs)("section",{className:"ui-items",children:[Object(m.jsx)(d.Action,{show:"enterError",children:Object(m.jsx)("span",{className:"ui-error",children:"Uh oh, search failed."})}),this.props.items.map((function(e,n){return Object(m.jsx)("img",{className:"ui-item",src:e.media.m,style:{"--i":n},onClick:function(){return t.props.transition("SELECT_PHOTO",{photo:e})}},e.link)}))]}),Object(m.jsx)(d.Action,{show:"enterPhoto",children:Object(m.jsx)("section",{className:"ui-photo-detail",onClick:function(){return t.props.transition("EXIT_PHOTO")},children:Object(m.jsx)("img",{className:"ui-photo",src:this.props.photo.media.m})})})]})}}]),n}(c.a.Component),j=Object(d.withStatechart)({initial:"start",states:{start:{on:{SEARCH:"loading"}},loading:{on:{SEARCH_SUCCESS:"gallery",SEARCH_FAILURE:"error",CANCEL_SEARCH:"gallery"},onEntry:"enterLoading",onExit:"exitLoading"},error:{on:{SEARCH:"loading"},onEntry:"enterError"},gallery:{on:{SEARCH:"loading",SELECT_PHOTO:"photo"},onEntry:"enterGallery"},photo:{on:{EXIT_PHOTO:"gallery"},onEntry:"enterPhoto"}}},{initialData:{items:[],photo:{media:{}}}})(b);h.a.render(Object(m.jsx)(j,{}),document.getElementById("root"))},43:function(t,e,n){}},[[13,1,2]]]);
//# sourceMappingURL=main.ad6e3aa1.chunk.js.map